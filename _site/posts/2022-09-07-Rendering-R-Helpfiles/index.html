<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-09-07">
<meta name="description" content="Included help files are critical for working in R and, despite the pain that is caused by creating them when you make libraries, they are an essential part of the experience and help your users more easily gain proficiency. One of the challenges, however, has been including the actual text of a help file into a markdown document. Here is an example of how to include help files by rendering .Rd to Html and then knitting it into the document itself.">

<title>dyerlab - Rendering R Help Files</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="dyerlab - Rendering R Help Files">
<meta name="twitter:description" content="Included help files are critical for working in R and, despite the pain that is caused by creating them when you make libraries, they are an essential part of the experience and help your users more easily gain proficiency. One of the challenges, however, has been including the actual text of a help file into a markdown document. Here is an example of how to include help files by rendering .Rd to Html and then knitting it into the document itself.">
<meta name="twitter:image" content="https://dyerlab.org/posts/2022-09-07-Rendering-R-Helpfiles/featured.png">
<meta name="twitter:image-height" content="101">
<meta name="twitter:image-width" content="373">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">dyerlab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../people.html" rel="" target="">
 <span class="menu-text">People</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../manuscripts.html" rel="" target="">
 <span class="menu-text">Manuscripts</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dyerlab/" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/dyerlab/" rel="" target=""><i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Rendering R Help Files</h1>
                  <div>
        <div class="description">
          <p>Included help files are critical for working in R and, despite the pain that is caused by creating them when you make libraries, they are an essential part of the experience and help your users more easily gain proficiency. One of the challenges, however, has been including the actual text of a help file into a markdown document. Here is an example of how to include help files by rendering .Rd to Html and then knitting it into the document itself.</p>
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 7, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p><img src="featured.png" class="img-fluid"></p>
<p>In teaching, there are many situations where you may want to show a generic <code>help</code> file and have it rendered in markdown. However, it has been a constant pain to do this for some reason. I finally found a way to do it easily in quarto so that you can quickly grab a help file, render it as HTML and then put it into a slide that is <code>.scrollable</code> using <a href="https://quarto.org">Quarto</a> in a <a href="https://reactjs.org">ReactJS</a> presentation.</p>
<p>Here is how to set it up.</p>
<ol type="1">
<li><p>Create a slide that has the atrributed <code>{.scrollable}</code> so that the content on the slide can be much taller than the slide itself (it will be).</p></li>
<li><p>Create a chunk that is not echoed (e.g., add the <code>#| echo: false</code> at the first line.)</p></li>
<li><p>The main code grabs the help file, renders it into html, saves it as a temporary file, and then uses knitr to paste it into the slide as raw ouptput.</p></li>
</ol>
<p>Here is an example I used for embedding <code>?strptime</code> into the presentation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>hlp <span class="ot">&lt;-</span> <span class="fu">help</span>(strptime)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>helpfile <span class="ot">&lt;-</span> utils<span class="sc">:::</span><span class="fu">.getHelpFile</span>( hlp )</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>outfile <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".html"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>tools<span class="sc">::</span><span class="fu">Rd2HTML</span>(helpfile, <span class="at">out=</span>outfile)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>rawHTML <span class="ot">&lt;-</span> <span class="fu">paste</span>( <span class="fu">readLines</span>(outfile), <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">asis_output</span>( htmltools<span class="sc">::</span><span class="fu">htmlPreserve</span>(rawHTML))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<title>R: Date-time Conversion Functions to and from Character</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js" onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css">
<div class="container">


<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<tbody>
<tr class="odd">
<td>strptime</td>
<td style="text-align: right;">R Documentation</td>
</tr>
</tbody>
</table>
<section id="strptime" class="level2">
<h2 class="anchored" data-anchor-id="strptime">Date-time Conversion Functions to and from Character</h2>
<section id="description" class="level3">
<h3 class="anchored" data-anchor-id="description">Description</h3>
<p>Functions to convert between character representations and objects of classes <code>"POSIXlt"</code> and <code>"POSIXct"</code> representing calendar dates and times.</p>
</section>
<section id="usage" class="level3">
<h3 class="anchored" data-anchor-id="usage">Usage</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode R code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## S3 method for class 'POSIXct'</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(x, <span class="at">format =</span> <span class="st">""</span>, <span class="at">tz =</span> <span class="st">""</span>, <span class="at">usetz =</span> <span class="cn">FALSE</span>, ...)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="do">## S3 method for class 'POSIXlt'</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(x, <span class="at">format =</span> <span class="st">""</span>, <span class="at">usetz =</span> <span class="cn">FALSE</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">digits =</span> <span class="fu">getOption</span>(<span class="st">"digits.secs"</span>), ...)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="do">## S3 method for class 'POSIXt'</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(x, <span class="at">digits =</span> <span class="cf">if</span>(<span class="fu">inherits</span>(x, <span class="st">"POSIXlt"</span>)) 14L <span class="cf">else</span> 6L,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">OutDec =</span> <span class="st">"."</span>, ...)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">strftime</span>(x, <span class="at">format =</span> <span class="st">""</span>, <span class="at">tz =</span> <span class="st">""</span>, <span class="at">usetz =</span> <span class="cn">FALSE</span>, ...)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">strptime</span>(x, format, <span class="at">tz =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="arguments" class="level3">
<h3 class="anchored" data-anchor-id="arguments">Arguments</h3>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<tbody>
<tr class="odd">
<td><code id="strptime_:_x">x</code></td>
<td><p>An object to be converted: a character vector for <code>strptime</code>, an object which can be converted to <code>"POSIXlt"</code> for <code>strftime</code>.</p></td>
</tr>
<tr class="even">
<td><code id="strptime_:_tz">tz</code></td>
<td><p>A character string specifying the time zone to be used for the conversion. System-specific (see <code>as.POSIXlt</code>), but <code>""</code> is the current time zone, and <code>"GMT"</code> is UTC. Invalid values are most commonly treated as UTC, on some platforms with a warning.</p></td>
</tr>
<tr class="odd">
<td><code id="strptime_:_format">format</code></td>
<td><p>A character string. The default for the <code>format</code> methods is <code>"%Y-%m-%d %H:%M:%S"</code> if any element has a time component which is not midnight, and <code>"%Y-%m-%d"</code> otherwise. If <code>options("digits.secs")</code> is set, up to the specified number of digits will be printed for seconds.</p></td>
</tr>
<tr class="even">
<td><code id="strptime_:_...">...</code></td>
<td><p>Further arguments to be passed from or to other methods.</p></td>
</tr>
<tr class="odd">
<td><code id="strptime_:_usetz">usetz</code></td>
<td><p>logical. Should the time zone abbreviation be appended to the output? This is used in printing times, and more reliable than using <code>"%Z"</code>.</p></td>
</tr>
<tr class="even">
<td><code id="strptime_:_digits">digits</code></td>
<td><p>integer determining the <code>format()</code>ing of seconds when needed. Note that the defaults for <code>format()</code> and <code>as.character()</code> differ on purpose, <code>as.character()</code> giving close to full accuracy as it does for numbers.</p></td>
</tr>
<tr class="odd">
<td><code id="strptime_:_OutDec">OutDec</code></td>
<td><p>a 1-character string specifying the decimal point to be used; the default is <em>not</em> <code>getOption("OutDec")</code> on purpose.</p></td>
</tr>
</tbody>
</table>




<h3 class="anchored">Details</h3>

<p>The <code>format</code> and <code>as.character</code> methods and <code>strftime</code>
convert objects from the classes <code>"POSIXlt"</code> and
<code>"POSIXct"</code> to <code>character</code> vectors.
</p>
<p><code>strptime</code> converts character vectors to class <code>"POSIXlt"</code>:
its input <code>x</code> is first converted by <code>as.character</code>.
Each input string is processed as far as necessary for the format
specified: any trailing characters are ignored.
</p>
<p><code>strftime</code> is a wrapper for <code>format.POSIXlt</code>, and it and
<code>format.POSIXct</code> first convert to class <code>"POSIXlt"</code> by
calling <code>as.POSIXlt</code> (so they also work for class
<code>"Date"</code>).  Note that only that conversion depends on the
time zone.  Since <span class="rlang"><b>R</b></span> version 4.2.0, <code>as.POSIXlt()</code> conversion now
treats the non-finite numeric <code>-Inf</code>, <code>Inf</code>, <code>NA</code> and
<code>NaN</code> differently (where previously all were treated as
<code>NA</code>). Also the <code>format()</code> method for <code>POSIXlt</code> now
treats these different non-finite times and dates analogously to type
<code>double</code>.
</p>
<p>The usual vector re-cycling rules are applied to <code>x</code> and
<code>format</code> so the answer will be of length of the longer of these
vectors.
</p>
<p>Locale-specific conversions to and from character strings are used
where appropriate and available.  This affects the names of the days
and months, the AM/PM indicator (if used) and the separators in output
formats such as <code>%x</code> and <code>%X</code>, <em>via</em> the setting of
the <code>LC_TIME</code> locale category.  The ‘current
locale’ of the descriptions might mean the locale in use at the start
of the <span class="rlang"><b>R</b></span> session or when these functions are first used.  (For input,
the locale-specific conversions can be changed by calling
<code>Sys.setlocale</code> with category <code>LC_TIME</code> (or
<code>LC_ALL</code>).  For output, what happens depends on the OS but
usually works.)
</p>

<p>The details of the formats are platform-specific, but the following are
likely to be widely available: most are defined by the POSIX standard.
A <em>conversion specification</em> is introduced by <code>%</code>, usually
followed by a single letter or <code>O</code> or <code>E</code> and then a single
letter.  Any character in the format string not part of a conversion
specification is interpreted literally (and <code>%%</code> gives
<code>%</code>).  Widely implemented conversion specifications include
</p>

<dl>
<dt><code>%a</code></dt><dd><p>Abbreviated weekday name in the current
locale on this platform.  (Also matches full name on input:
in some locales there are no abbreviations of names.)</p>
</dd>
<dt><code>%A</code></dt><dd><p>Full weekday name in the current locale.  (Also
matches abbreviated name on input.)</p>
</dd>
<dt><code>%b</code></dt><dd><p>Abbreviated month name in the current locale on
this platform.  (Also matches full name on input: in
some locales there are no abbreviations of names.)</p>
</dd>
<dt><code>%B</code></dt><dd><p>Full month name in the current locale.  (Also
matches abbreviated name on input.)</p>
</dd>
<dt><code>%c</code></dt><dd><p>Date and time.   Locale-specific on output,
<code>"%a %b %e %H:%M:%S %Y"</code> on input.</p>
</dd>
<dt><code>%C</code></dt><dd><p>Century (00–99): the integer part of the year
divided by 100.</p>
</dd>
<dt><code>%d</code></dt><dd><p>Day of the month as decimal number (01–31).</p>
</dd>
<dt><code>%D</code></dt><dd><p>Date format such as <code>%m/%d/%y</code>: the C99
standard says it should be that exact format (but not all OSes
comply).</p>
</dd>
<dt><code>%e</code></dt><dd><p>Day of the month as decimal number (1–31), with
a leading space for a single-digit number.</p>
</dd>
<dt><code>%F</code></dt><dd><p>Equivalent to %Y-%m-%d (the ISO 8601 date
format).</p>
</dd>
<dt><code>%g</code></dt><dd><p>The last two digits of the week-based year
(see <code>%V</code>).  (Accepted but ignored on input.)</p>
</dd>
<dt><code>%G</code></dt><dd><p>The week-based year (see <code>%V</code>) as a decimal
number.  (Accepted but ignored on input.)</p>
</dd>
<dt><code>%h</code></dt><dd><p>Equivalent to <code>%b</code>.</p>
</dd>
<dt><code>%H</code></dt><dd><p>Hours as decimal number (00–23).  As a special
exception strings such as ‘<span class="samp">⁠24:00:00⁠</span>’ are accepted for input,
since ISO 8601 allows these.</p>
</dd>
<dt><code>%I</code></dt><dd><p>Hours as decimal number (01–12).</p>
</dd>
<dt><code>%j</code></dt><dd><p>Day of year as decimal number (001–366):  For
input, 366 is only valid in a leap year.</p>
</dd>
<dt><code>%m</code></dt><dd><p>Month as decimal number (01–12).</p>
</dd>
<dt><code>%M</code></dt><dd><p>Minute as decimal number (00–59).</p>
</dd>
<dt><code>%n</code></dt><dd><p>Newline on output, arbitrary whitespace on input.</p>
</dd>
<dt><code>%p</code></dt><dd><p>AM/PM indicator in the locale.  Used in
conjunction with <code>%I</code> and <b>not</b> with <code>%H</code>.  An
empty string in some locales (for example on some OSes,
non-English European locales including Russia). The behaviour is
undefined if used for input in such a locale.
</p>
<p>Some platforms accept <code>%P</code> for output, which uses a lower-case
version (<code>%p</code> may also use lower case): others will output
<code>P</code>.</p>
</dd>
<dt><code>%r</code></dt><dd><p>For output, the 12-hour clock time (using the
locale's AM or PM): only defined in some locales, and on some OSes
misleading in locales which do not define an AM/PM indicator.
For input, equivalent to <code>%I:%M:%S %p</code>.</p>
</dd>
<dt><code>%R</code></dt><dd><p>Equivalent to <code>%H:%M</code>.</p>
</dd>
<dt><code>%S</code></dt><dd><p>Second as integer (00–61), allowing for
up to two leap-seconds (but POSIX-compliant implementations
will ignore leap seconds).</p>
</dd>
<dt><code>%t</code></dt><dd><p>Tab on output, arbitrary whitespace on input.</p>
</dd>
<dt><code>%T</code></dt><dd><p>Equivalent to <code>%H:%M:%S</code>.</p>
</dd>
<dt><code>%u</code></dt><dd><p>Weekday as a decimal number (1–7, Monday is 1).</p>
</dd>

<dt><code>%U</code></dt><dd><p>Week of the year as decimal number (00–53) using
Sunday as the first day 1 of the week (and typically with the
first Sunday of the year as day 1 of week 1).  The US convention.</p>
</dd>
<dt><code>%V</code></dt><dd><p>Week of the year as decimal number (01–53) as
defined in ISO 8601.
If the week (starting on Monday) containing 1 January has four or
more days in the new year, then it is considered week 1.  Otherwise, it
is the last week of the previous year, and the next week is week
1.  (Accepted but ignored on input.)</p>
</dd>
<dt><code>%w</code></dt><dd><p>Weekday as decimal number (0–6, Sunday is 0).</p>
</dd>
<dt><code>%W</code></dt><dd><p>Week of the year as decimal number (00–53) using
Monday as the first day of week (and typically with the
first Monday of the year as day 1 of week 1).  The UK convention.</p>
</dd>
<dt><code>%x</code></dt><dd><p>Date.  Locale-specific on output,
<code>"%y/%m/%d"</code> on input.</p>
</dd>
<dt><code>%X</code></dt><dd><p>Time.  Locale-specific on output,
<code>"%H:%M:%S"</code> on input.</p>
</dd>
<dt><code>%y</code></dt><dd><p>Year without century (00–99).  On input, values
00 to 68 are prefixed by 20 and 69 to 99 by 19 – that is the
behaviour specified by the 2018 POSIX standard, but it does
also say ‘it is expected that in a future version the
default century inferred from a 2-digit year will change’.</p>
</dd>
<dt><code>%Y</code></dt><dd><p>Year with century.  Note that whereas there was no
zero in the original Gregorian calendar, ISO 8601:2004 defines it
to be valid (interpreted as 1BC): see
<a href="https://en.wikipedia.org/wiki/0_(year)">https://en.wikipedia.org/wiki/0_(year)</a>.  However, the standards
also say that years before 1582 in its calendar should only be used
with agreement of the parties involved.
</p>
<p>For input, only years <code>0:9999</code> are accepted.</p>
</dd>
<dt><code>%z</code></dt><dd><p>Signed offset in hours and minutes from UTC, so
<code>-0800</code> is 8 hours behind UTC.  (Standard only for output.  For
input <span class="rlang"><b>R</b></span> currently supports it on all platforms – values from
<code>-1400</code> to <code>+1400</code> are accepted.)</p>
</dd>

<dt><code>%Z</code></dt><dd><p>(Output only.)  Time zone abbreviation as a
character string (empty if not available).  This may not be reliable
when a time zone has changed abbreviations over the years.</p>
</dd>
</dl>

<p>Where leading zeros are shown they will be used on output but are
optional on input.  Names are matched case-insensitively on input:
whether they are capitalized on output depends on the platform and the
locale.  Note that abbreviated names are platform-specific (although
the standards specify that in the ‘<span class="samp">⁠C⁠</span>’ locale they must be the
first three letters of the capitalized English name: this convention
is widely used in English-language locales but for example the French
month abbreviations are not the same on any two of Linux, macOS, Solaris
and Windows). Knowing what the abbreviations are is essential
if you wish to use <code>%a</code>, <code>%b</code> or <code>%h</code> as part of an
input format: see the examples for how to check.
</p>
<p>When <code>%z</code> or <code>%Z</code> is used for output with an
object with an assigned time zone an attempt is made to use the values
for that time zone — but it is not guaranteed to succeed.
</p>
<p>The definition of ‘whitespace’ for <code>%n</code> and <code>%t</code>
is platform-dependent: for most it does not include non-breaking spaces.
</p>
<p>Not in the standards and less widely implemented are
</p>

<dl>
<dt><code>%k</code></dt><dd><p>The 24-hour clock time with single digits preceded
by a blank.</p>
</dd>
<dt><code>%l</code></dt><dd><p>The 12-hour clock time with single digits preceded
by a blank.</p>
</dd>
<dt><code>%s</code></dt><dd><p>(Output only.) The number of seconds since the
epoch.</p>
</dd>
<dt><code>%+</code></dt><dd><p>(Output only.) Similar to <code>%c</code>, often
<code>"%a %b %e %H:%M:%S %Z %Y"</code>. May depend on the locale.</p>
</dd>
</dl>

<p>For output there are also <code>%O[dHImMUVwWy]</code> which may emit
numbers in an alternative locale-dependent format (e.g., roman
numerals), and <code>%E[cCyYxX]</code> which can use an alternative
‘era’ (e.g., a different religious calendar).  Which of these
are supported is OS-dependent.  These are accepted for input, but with
the standard interpretation.
</p>
<p>Specific to <span class="rlang"><b>R</b></span> is <code>%OSn</code>, which for output gives the seconds
truncated to <code>0 &lt;= n &lt;= 6</code> decimal places (and if <code>%OS</code> is
not followed by a digit, it uses the setting of
<code>getOption("digits.secs")</code>, or if that is unset, <code>n =
  0</code>).  Further, for <code>strptime</code> <code>%OS</code> will input seconds
including fractional seconds.  Note that <code>%S</code> does not read
fractional parts on output.
</p>
<p>The behaviour of other conversion specifications (and even if other
character sequences commencing with <code>%</code> <em>are</em> conversion
specifications) is system-specific.  Some systems document that the
use of multi-byte characters in <code>format</code> is unsupported: UTF-8
locales are unlikely to cause a problem.
</p>


<h3 class="anchored">Value</h3>

<p>The <code>format</code> methods and <code>strftime</code> return character vectors
representing the time.  <code>NA</code> times are returned as
<code>NA_character_</code>.
</p>
<p><code>strptime</code> turns character representations into an object of
class <code>"POSIXlt"</code>.  The time zone is used to set the
<code>isdst</code> component and to set the <code>"tzone"</code> attribute if
<code>tz != ""</code>.  If the specified time is invalid (for example
‘<span class="samp">⁠"2010-02-30 08:00"⁠</span>’) all the components of the result are
<code>NA</code>.  (NB: this does means exactly what it says – if it is an
invalid time, not just a time that does not exist in some time zone.)
</p>


<h3 class="anchored">Printing years</h3>

<p>Everyone agrees that years from 1000 to 9999 should be printed with 4
digits, but the standards do not define what is to be done outside
that range.  For years 0 to 999 most OSes pad with zeros or spaces to
4 characters, but Linux/glibc outputs just the number.
</p>
<p>OS facilities will probably not print years before 1 CE (aka 1 AD)
‘correctly’ (they tend to assume the existence of a year 0: see
<a href="https://en.wikipedia.org/wiki/0_(year)">https://en.wikipedia.org/wiki/0_(year)</a>, and some OSes get them
completely wrong).  Common formats are <code>-45</code> and <code>-045</code>.
</p>
<p>Years after 9999 and before -999 are normally printed with five or
more characters.
</p>
<p>Some platforms support modifiers from POSIX 2008 (and others).  On
Linux/glibc the format <code>"%04Y"</code> assures a minimum of four
characters and zero-padding (the default is no padding).  The internal
code (as used on Windows and by default on macOS) uses zero-padding by
default (this can be controlled by environment variable
<span class="env">R_PAD_YEARS_BY_ZERO</span>).  On those platforms, formats <code>%04Y</code>,
<code>%_4Y</code> and <code>%_Y</code> can be used for zero, space and no
padding respectively. (On macOS, the native code (not the default)
supports none of these and uses zero-padding to 4 digits.)
</p>


<h3 class="anchored">Time zone offsets</h3>

<p>Offsets from GMT (also known as UTC) are part of the conversion
between timezones and to/from class <code>"POSIXct"</code>, but cause
difficulties as they are often computed incorrectly.
</p>
<p>They conventionally have the opposite sign from time-zone
specifications (see <code>Sys.timezone</code>): positive values are
East of the meridian.  Although there have been time zones with
offsets like +00:09:21 (Paris in 1900), and -00:44:30 (Liberia until
1972), offsets are usually treated as whole numbers of minutes, and
are most often seen in RFC 5322 email headers in forms like
<code>-0800</code> (e.g., used on the Pacific coast of the USA in winter).
</p>
<p>Format <code>%z</code> can be used for input or output: it is a character
string, conventionally plus or minus followed by two digits for hours
and two for minutes: the standards say that an empty string should be
output if the offset is undetermined, but some systems use
<code>+0000</code> or the offsets for the time zone in use for the current
year.  (On some platforms this works better after conversion to
<code>"POSIXct"</code>.  Some platforms only recognize hour or half-hour
offsets for output.)
</p>
<p>Using <code>%z</code> for input makes most sense with <code>tz = "UTC"</code>.
</p>


<h3 class="anchored">Sources</h3>

<p>Input uses the POSIX function <code>strptime</code> and output the C99
function <code>strftime</code>.
</p>
<p>However, not all OSes (notably Windows) provided <code>strptime</code> and
many issues were found for those which did, so since 2000 <span class="rlang"><b>R</b></span> has used
a fork of code from ‘<span class="samp">⁠glibc⁠</span>’.  The forked code uses the
system's <code>strftime</code> to find the locale-specific day and month
names and any AM/PM indicator.
</p>
<p>On some platforms (including Windows and by default on macOS) the
system's <code>strftime</code> is replaced (along with most of the rest of
the C-level datetime code) by code modified from IANA's ‘<span class="samp">⁠tzcode⁠</span>’
distribution (<a href="https://www.iana.org/time-zones">https://www.iana.org/time-zones</a>).
</p>
<p>Note that as <code>strftime</code> is used for output (and not
<code>wcsftime</code>), argument <code>format</code> is translated if necessary to
the session encoding.
</p>


<h3 class="anchored">Note</h3>

<p>The default formats follow the rules of the ISO 8601 international
standard which expresses a day as <code>"2001-02-28"</code> and a time as
<code>"14:01:02"</code> using leading zeroes as here.  (The ISO form uses no
space, possibly ‘<span class="samp">⁠T⁠</span>’, to separate dates and times: <span class="rlang"><b>R</b></span> uses a space
by default.)
</p>
<p>For <code>strptime</code> the input string need not specify the date
completely: it is assumed that unspecified seconds, minutes or hours
are zero, and an unspecified year, month or day is the current one.
(However, if a month is specified, the day of that month has to be
specified by <code>%d</code> or <code>%e</code> since the current day of the
month need not be valid for the specified month.)  Some components may
be returned as <code>NA</code> (but an unknown <code>tzone</code> component is
represented by an empty string).
</p>
<p>If the time zone specified is invalid on your system, what happens is
system-specific but it will probably be ignored.
</p>
<p>Remember that in most time zones some times do not occur and some
occur twice because of transitions to/from ‘daylight saving’
(also known as ‘summer’) time.  <code>strptime</code> does not
validate such times (it does not assume a specific time zone), but
conversion by <code>as.POSIXct</code> will do so.  Conversion by
<code>strftime</code> and formatting/printing uses OS facilities and may
return nonsensical results for non-existent times at DST transitions.
</p>
<p>In a C locale <code>%c</code> is required to be
<code>"%a %b %e %H:%M:%S %Y"</code>.  As Windows does not comply (and
uses a date format not understood outside N. America), that format is
used by <span class="rlang"><b>R</b></span> on Windows in all locales.
</p>
<p>There is a limit of 2048 bytes on each string produced by
<code>strftime</code> and the <code>format</code> methods.  As from <span class="rlang"><b>R</b></span> 4.3.0
attempting to exceed this is an error (previous versions silently
truncated at 255 bytes).
</p>


<h3 class="anchored">References</h3>

<p>International Organization for Standardization (2004, 2000, ...)
‘ISO 8601.  Data elements and interchange formats –
Information interchange – Representation of dates and times.’,
slightly updated to International Organization for Standardization (2019)
‘ISO 8601-1:2019.  Date and time – Representations for
information interchange – Part 1: Basic rules’, and further amended
in 2022.
For links to versions available on-line see (at the time of writing)
<a href="https://dotat.at/tmp/ISO_8601-2004_E.pdf">https://dotat.at/tmp/ISO_8601-2004_E.pdf</a> and
<a href="https://www.qsl.net/g1smd/isopdf.htm">https://www.qsl.net/g1smd/isopdf.htm</a>; for information on the
current official version, see <a href="https://www.iso.org/iso/iso8601">https://www.iso.org/iso/iso8601</a> and
<a href="https://en.wikipedia.org/wiki/ISO_8601">https://en.wikipedia.org/wiki/ISO_8601</a>.
</p>
<p>The POSIX 1003.1 standard, which is in some respects stricter than ISO 8601.
</p>


<h3 class="anchored">See Also</h3>

<p>DateTimeClasses for details of the date-time classes;
locales to query or set a locale.
</p>
<p>Your system's help page on <code>strftime</code> to see how to specify their
formats.  (On some systems, including Windows, <code>strftime</code> is
replaced by more comprehensive internal code.)
</p>


<h3 class="anchored">Examples</h3>

<pre><code class="language-R">
## locale-specific version of date()
format(Sys.time(), "%a %b %d %X %Y %Z")

## time to sub-second accuracy (if supported by the OS)
format(Sys.time(), "%H:%M:%OS3")

## read in date info in format 'ddmmmyyyy'
## This will give NA(s) in some non-English locales; setting the C locale
## as in the commented lines will overcome this on most systems.
## lct &lt;- Sys.getlocale("LC_TIME"); Sys.setlocale("LC_TIME", "C")
x &lt;- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
z &lt;- strptime(x, "%d%b%Y")
## Sys.setlocale("LC_TIME", lct)
z
(chz &lt;- as.character(z)) # same w/o TZ
## *here* (but not in general), the same as format():
stopifnot(exprs = {
     identical(chz, format(z))
     grepl("^1960-0[137]-[03][012]$", chz[!is.na(z)])
})

## read in date/time info in format 'm/d/y h:m:s'
dates &lt;- c("02/27/92", "02/27/92", "01/14/92", "02/28/92", "02/01/92")
times &lt;- c("23:03:20", "22:29:56", "01:03:30", "18:21:03", "16:56:26")
x &lt;- paste(dates, times)
z2 &lt;- strptime(x, "%m/%d/%y %H:%M:%S")
z2 
## *here* (but not in general), the same as format():
stopifnot(identical(format(z2), as.character(z2)))

## time with fractional seconds
z3 &lt;- strptime("20/2/06 11:16:16.683", "%d/%m/%y %H:%M:%OS") 
z3 # prints without fractional seconds by default, digits.sec = NULL ("= 0")
op &lt;- options(digits.secs = 3)
z3 # shows the 3 extra digits
as.character(z3) # ditto
options(op)

## time zone names are not portable, but 'EST5EDT' comes pretty close.
z4 &lt;- strptime(c("2006-01-08 10:07:52", "2006-08-07 19:33:02"),
               "%Y-%m-%d %H:%M:%S", tz = "EST5EDT")
z4 
attr(z4, "tzone")
as.character(z4)
z4$sec[2] &lt;- pi # "very" fractional seconds
as.character(z4) # shows full precision
format(z4) # no fractional sec
format(z4, digits=8) # shows only 6  (hard-wired maximum)
format(z4, digits=4)


## An RFC 5322 header (Eastern Canada, during DST)
## In a non-English locale the commented lines may be needed.

## prev &lt;- Sys.getlocale("LC_TIME"); Sys.setlocale("LC_TIME", "C")
strptime("Tue, 23 Mar 2010 14:36:38 -0400", "%a, %d %b %Y %H:%M:%S %z")
## Sys.setlocale("LC_TIME", prev)

## Make sure you know what the abbreviated names are for you if you wish
## to use them for input (they are matched case-insensitively):
format(s1 &lt;- seq.Date(as.Date('1978-01-01'), by = 'day',   len =  7), "%a")
format(s2 &lt;- seq.Date(as.Date('2000-01-01'), by = 'month', len = 12), "%b")

## Non-finite date-times :
format(as.POSIXct(Inf)) # "Inf"  (was  NA  in R &lt;= 4.1.x)
format(as.POSIXlt(c(-Inf,Inf,NaN,NA))) # were all NA
</code></pre>


</section></section></div>



</div>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>