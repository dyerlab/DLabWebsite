{"title":"Using Google Drive as an R Data Repository","markdown":{"yaml":{"title":"Using Google Drive as an R Data Repository","description":"A short description of the post.\n","author":[{"name":"Rodney Dyer","url":"https://dyerlab.org","affiliation":"Center for Environmental Studies","affiliation_url":"https://ces.vcu.edu","orcid_id":"0000-0003-4707-3453"}],"date":"2018-07-19","output":{"distill::distill_article":{"self_contained":false}}},"headingText":"Publishing Spreadsheets from Google Drive","containsRefs":false,"markdown":"\n\n\n\n\nThis is such a common thing to do these days, it is easier to just post this here rather than search through my class notes each time someone asks me how to do this.\n\nHere is the issue.  Say you have some data associated with your research project and are adding to it and doing analyses.  Chances are, you have it shoved into an Excel spreadsheet that is on your laptop, your home computer, the computer in the lab, a backup disk (you are keeping backups, right?), and even perhaps shared on a Cloud Drive with your collaborators/advisors/partner/whatever.  Great!  Now you have absolutely no way to know which version of the dataset is the real one and which are **wrong**.\n\n\n\nIn R, we can use the ability to serve out spreadsheet-like data as *.csv files using Google Drive.  This way, the data are in one (and only one) location and can be accessed by anyone you would like to grant access.  Here is how to set it up.\n\nFirst, on Google Drive, you need to tell it to make a spreadsheet available and how to publish it.  This is done from the menu as **File -> Publish** to the Web&#8230;  A dialog box will pop up, like the one below, and let you select which sheet is published and what it is published as.  The salient part here is that you should select **Comma separated values (*.csv)** as the output type.  The URL that is provided in the image below should be copied as we will be using it in R to grab the data.<figure class=\"wp-block-image\">\n\n<img src=\"https://rodneydyer.com/wp-content/uploads/2018/07/2018-07-19_11-43-47.png\" alt=\"Dialog from Google Docs allowing you to select the sheet to be published and the format it will be published in.\" class=\"wp-image-2098\" srcset=\"https://rodneydyer.com/wp-content/uploads/2018/07/2018-07-19_11-43-47.png 565w, https://rodneydyer.com/wp-content/uploads/2018/07/2018-07-19_11-43-47-274x300.png 274w\" sizes=\"(max-width: 565px) 100vw, 565px\" /> </figure> \n\nNext, you can fire up R (I use RStudio as a sane interface) and make sure you have the RCurl library installed.  If not, install it like this:\n\n<pre class=\"crayon-plain-tag\">install.packages(\"RCurl\")</pre>\n\nSo to load the file from Google Drive, we need to format the URL from Google Drive\n\n<pre class=\"crayon-plain-tag\">require(RCurl)\nlink <- \"https://docs.google.com/spreadsheets/d/1QL9fYeKkDKphba12WLVTBJrv_d1WHTc9SrZoBeIFgj8/pub?gid=0&amp;single=true&amp;output=csv\"\nurl <- getURL( link )</pre>\n\nThen open an internet connection asking for a text-based communication between Google Drive and your R session\n\n<pre class=\"crayon-plain-tag\">con <- textConnection( url )</pre>\n\nand then pull the data into R as if it was on the local filesystem.\n\n<pre class=\"crayon-plain-tag\">data <- read.csv( con )</pre>\n\nAnd your data should be there.\n\n<pre class=\"crayon-plain-tag\">summary(data)\n\n#   Population       SampleID      X.Coordinate   Y.Coordinate      Cf.G8      \n# Min.   :2.000   Min.   :203.0   Min.   : 346   Min.   : 254   Min.   :147.0  \n# 1st Qu.:3.000   1st Qu.:315.5   1st Qu.:1482   1st Qu.:2231   1st Qu.:155.0  \n# Median :4.000   Median :428.0   Median :1656   Median :2928   Median :157.0  \n# Mean   :3.809   Mean   :428.0   Mean   :1747   Mean   :2588   Mean   :160.3  \n# 3rd Qu.:5.000   3rd Qu.:540.5   3rd Qu.:1914   3rd Qu.:3082   3rd Qu.:165.0  \n# Max.   :6.000   Max.   :653.0   Max.   :3778   Max.   :6148   Max.   :199.0  \n#                                                               NAs   :9      \n#       X           Cf.H18           X.1            Cf.N5            X.2     \n# Min.   :149   Min.   : 83.0   Min.   : 83.0   Min.   :148.0   Min.   :150  \n# 1st Qu.:161   1st Qu.: 99.0   1st Qu.:107.0   1st Qu.:165.0   1st Qu.:170  \n# Median :167   Median :105.0   Median :115.0   Median :170.0   Median :170  \n# Mean   :172   Mean   :104.5   Mean   :112.8   Mean   :167.7   Mean   :170  \n# 3rd Qu.:181   3rd Qu.:111.0   3rd Qu.:119.0   3rd Qu.:170.0   3rd Qu.:170  \n# Max.   :519   Max.   :123.0   Max.   :123.0   Max.   :172.0   Max.   :172  \n# NAs   :9     NAs   :1       NAs   :1       NAs   :36      NAs   :36   \n#     Cf.N10           X.3            Cf.O5            X.4       \n Min.   :171.0   Min.   :175.0   Min.   :176.0   Min.   :176.0  \n# 1st Qu.:187.0   1st Qu.:193.0   1st Qu.:178.0   1st Qu.:182.0  \n Median :189.0   Median :197.0   Median :182.0   Median :194.0  \n# Mean   :189.4   Mean   :196.3   Mean   :182.5   Mean   :190.3  \n 3rd Qu.:193.0   3rd Qu.:201.0   3rd Qu.:182.0   3rd Qu.:196.0  \n# Max.   :205.0   Max.   :205.0   Max.   :202.0   Max.   :204.0  \n NAs   :13      NAs   :13      NAs   :8       NAs   :8</pre>\n \n \n \n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":{"distill::distill_article":{"self_contained":false}},"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"output-file":"using-google-drive-as-an-r-data-repository.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.0.38","theme":"cosmo","title-block-banner":true,"title":"Using Google Drive as an R Data Repository","description":"A short description of the post.\n","author":[{"name":"Rodney Dyer","url":"https://dyerlab.org","affiliation":"Center for Environmental Studies","affiliation_url":"https://ces.vcu.edu","orcid_id":"0000-0003-4707-3453"}],"date":"2018-07-19"},"extensions":{"book":{"multiFile":true}}}}}