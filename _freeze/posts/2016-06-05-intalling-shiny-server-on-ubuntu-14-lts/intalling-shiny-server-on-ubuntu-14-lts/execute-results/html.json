{
  "hash": "de5ac2a4700c934189049c0a9dd1e916",
  "result": {
    "markdown": "---\ntitle: \"Intalling Shiny Server on Ubuntu 14 LTS\"\ndescription: |\n  A short description of the post.\nauthor:\n  - name: Rodney Dyer\n    url: https://dyerlab.org\n    affiliation: Center for Environmental Studies\n    affiliation_url: https://ces.vcu.edu\n    orcid_id: 0000-0003-4707-3453\ndate: 2016-06-05\noutput:\n  distill::distill_article:\n    self_contained: false\n---\n\n\n\n\n\nOK, so I just &#8216;[found](http://shiny.rstudio.com)&#8216; shiny and it has a lot of cool stuff to it.  OK, I've known about it for a long time but have just had the opportunity to sit down and work it out and see how it can fit into the presentation and learning I'm trying to develop in my [Applied Population Genetics](http://popgen.bio.vcu.edu) online textbook.  Here is a brief overview of how I set up the shiny server on my Ubuntu box that is hosting the book (so I can embed more interactivity in the display).\n\n<!--more-->\n\nOK, below are the steps that I'm taking to upgrade everything on the box and install the shiny server app and start hosting individual shiny apps.\n\n## Updating Background & Installing Necessary Components\n\nFirst, you should update to the latest releases.  I'm running a LTS version (long-term support) so it is pretty stark.\n\n<pre class=\"lang:sh decode:true\">sudo apt-get update\nsudo apt-get upgrade</pre>\n\nNext, I needed to install the following development libraries so that things will go easily.\n\n<pre class=\"lang:sh decode:true\">sudo apt-get install libssl-dev\nsudo apt-get install gdebi-core\nsudo su - -c \"R -e \\\"install.packages('devtools', repos='http://cran.rstudio.com/')\\\"\"</pre>\n\nAnd then we can use the <span class=\"lang:r decode:true crayon-inline \">gdebi</span>  framework to install the the server\n\n<pre class=\"lang:sh decode:true \">wget https://download3.rstudio.org/ubuntu-12.04/x86_64/shiny-server-1.4.2.786-amd64.deb\nsudo gdebi shiny-server-1.4.2.786-amd64.deb</pre>\n\nThis puts the conf file in <span class=\"lang:r decode:true crayon-inline \">/etc/init/shiny-server.conf</span> , sets up the user <span class=\"lang:r decode:true crayon-inline \">shiny</span>  (and has a home directory), and starts the shiny-server process.\n\n## Redirecting URL Requests\n\nAt this point the shiny-server is running and is servubg pages on port 3838.  However, I block all ports other than 22 and 80 for security, so what I want to do is to redirect requests to my server asking for anything in the subdirectory [http://popgen.bio.vcu.edu/shiny](http://popgen.bio.vcu.edu/shiny/) to redirect to [http://127.0.0.1:3838](http://127.0.0.1:3838/) locally.  I need to do this by fiddling with the Apache configuration scripts.\n\nApache on Ubuntu puts configuration scripts in /etc/apache2/sites-available and symliks them to /etc/apache2/sites-enabled.  In this file, I set up a proxy pass so that any url that is asking for stuff in the /shiny/ subdirectory be redirected to the 3838 port on this machine.  At the end of the section for this server, enclosed in <span class=\"lang:r decode:true crayon-inline \"><VirtualHost *:80></span> <span class=\"s1\">, I put the following in:</span>\n\n<pre class=\"lang:sh decode:true\">RewriteCond %{HTTP:Upgrade} =websocket\nRewriteRule /shiny/(.*) ws://localhost:3838/$1 [P,L]\nRewriteCond %{HTTP:Upgrade} !=websocket\nRewriteRule /shiny/(.*) http://localhost:3838/$1 [P,L]\nProxyPass /shiny/ http://localhost:3838/        \nProxyPassReverse /shiny/ http://localhost:3838/</pre>\n\nYou need to make sure that the following mod are turned on for apache:\n\n  * mod_proxy\n  * mod\\_proxy\\_html\n  * mod\\_proxy\\_wstunnel\n\nEnable them the way that is appropriate for your server.  On Ubuntu it is:\n\n<pre class=\"lang:sh decode:true\">a2enmod mod_proxy\na2enmod mod_proxy_html\na2enmod mod_proxy_wstunnel</pre>\n\n## Restart Apache\n\nAll that is left to do now is restart apache and check to see the startup screen for all shiny apps on the <http://popgen.bio.vcu.edu/shiny/> page.\n\n<pre class=\"lang:sh decode:true\">sudo service apache2 restart</pre>\n\nThe first shiny app to be integrated into the Applied Population Genetics textbook is located in the Hardy-Weinberg chapter.  It is embedded as:\n\n<pre></pre>\n\nAnd creates the following widget in the book (go ahead and play with it, it is interactive):\n\n\n\nThis opens a whole slew of interactive graphics for the textbook!\n \n \n \n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}